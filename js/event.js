function togglePause(){var e=document.getElementById("bgmusic");return e.paused?e.play():e.pause()}function SlideBg(){var e,s;$(".story_slide").each((function(a,r){e=$(this).data("bgmob"),s=$(this).data("bgdesk"),$(window).width()>768?$(this).css("background-image","url("+s+")"):$(this).css("background-image","url("+e+")")}))}function appHeight(e){var s=$(window).height(),a=s,r=$(window).width();if(1==e){if(window.innerHeight>window.innerWidth){a=s;if(s>769&&$(window).width()>769){a=.9*s;parseInt(.57*a)}else a=s,"100%";$("#main .main_wrapper").css({height:"100%",width:"100%"})}else{a=.9*s;var n=parseInt(.57*a);$("#main .main_wrapper").css({height:a+"px",width:n+"px"})}$(".story_slide").css("height",a+"px")}2==e&&($("#main .main_wrapper").css({height:s+"px",width:"100%"}),$(".story_slide").css("height",s+"px"),s>750&&r>768?$("#main").addClass("centerSlideCont"):$("#main").removeClass("centerSlideCont"))}function RSVP_success_msg(e){$(".story_slide.rsvp .form-wrapper").addClass("onSuccess"),$(".ajax_success_message_wrapper").html(e)}$(document).ready((function(e){var s=$("#main").data("language"),a={required_fld:{en:"Required field",ar:"حقل إجباري"},pin_empty:{en:"Enter pin",ar:"أدخل الرمز"},pin_mismatch:{en:"Wrong pin",ar:"خطأ في الرمز"},lbl_days:{en:"Days",ar:"يوم"},lbl_hrs:{en:"Hours",ar:"ساعة"},lbl_mins:{en:"Minutes",ar:"دقيقة"},lbl_secs:{en:"Seconds",ar:"ثانية"},lbl_np_zero:{en:"Number of attendees can't be zero",ar:"لا يمكن أن يكون عدد الحاضرين صفرًا"},lbl_np_max:{en:"Number of attendees can't be more than ",ar:"لا يمكن أن يكون عدد الحاضرين أكثر من "}};appHeight(tplID),$(".HeroSlider_wrapper").on("init",(function(e,s,a){setTimeout((function(){$(".HeroSlider_wrapper").addClass("ini_zoom")}),300)}));var r=!1,n=!1;($(window).width()>1024||isVertical)&&(r=!0,n=!0);var t=$("#story_slider");t.slick({arrows:!1,dots:!1,slidesToShow:1,slidesToScroll:1,infinite:!1,pauseOnFocus:!1,pauseOnHover:!1,vertical:r,verticalSwiping:n,autoplay:evAutoPlay,autoplaySpeed:evAutoplaySpeed,infinite:evInfinteLoop}),evAutoPlay&&t.slick("slickPause"),t.on("wheel",(function(e){e.preventDefault(),e.originalEvent.deltaY<0?$(this).slick("slickPrev"):$(this).slick("slickNext")})),slidesCount=$("#story_slider .story_slide").length-1;var i=0,l=document.getElementById("bgmusic");$("#story_slider").on("beforeChange",(function(e,s,a,r){0!=r?($(".introLineIMG, .introLineTXT").addClass("hideIntroLine"),$(".intro_screen").addClass("dim"),$("#music_player_BTN").length>0&&$("#music_player_BTN").addClass("showAudioBtn"),$("#bgmusic").length>0&&(0==i&&l.play(),i++)):($(".introLineIMG, .introLineTXT").removeClass("hideIntroLine"),$(".intro_screen").removeClass("dim"),$("#music_player_BTN").length>0&&$("#music_player_BTN").removeClass("showAudioBtn")),r==slidesCount?setTimeout((function(){$("#sec_story").addClass("showPoweredBy")}),300):$("#sec_story").removeClass("showPoweredBy");var n=s.$slides.get(r);$(n).hasClass("IMGslide")&&$(n).addClass("animIMG"),setTimeout((function(){$(n).siblings().removeClass("animIMG")}),300);var t=r/slidesCount*100;$(".progress_bar .progress_state").css("width",t+"%")})),$("form#rsvp-event input, form#rsvp-event select").on("focus",(function(){evAutoPlay&&t.slick("slickPause"),console.log("form focus")}));var o=!1;$(".form-field select#guests").on("change",(function(){isNPvar&&(1==$(this).val()?($(".form-field.fld-npersons").fadeIn(),o=!0):($(".form-field.fld-npersons").fadeOut(),o=!1,$("input#npersons").val("")))}));var d=null;$("form#rsvp-event").on("submit",(function(e){var r=!0;$("div.fld_error").length>0&&$("div.fld_error").remove(),$("input#full_name, select#guests").removeClass("error_input");var n=$("input#full_name").val(),i=$("select#guests").val(),l=$("input#rsvp_email").val(),c=$("input#couple_name").val(),p=$("input#nid").val(),u=$("input#wed_date").val();if(isNPvar&&(d=$("select#npersons").val()),""==n&&(r=!1,$("input#full_name").parent().append('<div class="fld_error">'+a.required_fld[s]+"</div>"),$("input#full_name").addClass("error_input")),""==i&&(r=!1,$("select#guests").parent().append('<div class="fld_error">'+a.required_fld[s]+"</div>"),$("select#guests").addClass("error_input")),isNPvar&&o&&(""==d?(r=!1,$("select#npersons").parent().append('<div class="fld_error">'+a.required_fld[s]+"</div>"),$("select#npersons").addClass("error_input")):(d<1&&(r=!1,$("select#npersons").parent().append('<div class="fld_error">'+a.lbl_np_zero[s]+"</div>"),$("select#npersons").addClass("error_input")),d>npCount&&(r=!1,$("select#npersons").parent().append('<div class="fld_error">'+a.lbl_np_max[s]+npCount+"</div>"),$("select#npersons").addClass("error_input")))),r){var _={name:n=Base64.encode(""+n),guests:i,email:l,title:c=Base64.encode(""+c),nid:p,wed_date:u,n_persons:d};_=JSON.stringify(_),console.log(_);var m="pdata="+_;console.log(m),$("form#rsvp-event").addClass("lock-form"),$.ajax({type:"POST",url:"/rsvp",dataType:"json",data:m,success:function(e){console.log(e),e.status?(RSVP_success_msg(e.msg),$("form#rsvp-event").removeClass("lock-form"),evAutoPlay&&t.slick("slickPlay")):(alert("Something went wrong, please try again"),$("form#rsvp-event").removeClass("lock-form"),evAutoPlay&&t.slick("slickPlay"))},error:function(){alert("Error: Something went wrong, please try again"),$("form#rsvp-event").removeClass("lock-form")}})}e.preventDefault()})),$("form#unlock_preview").on("submit",(function(e){var r=$("form#unlock_preview input#db_pass").val(),n=$("form#unlock_preview input#password").val();n=n.toLowerCase(),$("form#unlock_preview span.form-error").remove();var t=!0,i="";""==n?(t=!1,i=a.pin_empty[s]):n!=r&&(t=!1,i=a.pin_mismatch[s]),t?$(".event_lock").fadeOut():$(this).append('<span class="form-error">'+i+"</span>"),e.preventDefault()}));var c=$("#clock_wed").data("deadline");$("#clockTimer").countdown(c,(function(e){var r='<div id="tdays" class="tcell t_days"><span class="t_val daysVal">%D</span><span class="t_label">'+a.lbl_days[s]+'</span></div><div id="thours" class="tcell t_hours"><span class="t_val hoursVal">%H</span><span class="t_label">'+a.lbl_hrs[s]+'</span></div><div id="tmins" class="tcell t_mins"><span class="t_val minsVal">%M</span><span class="t_label">'+a.lbl_mins[s]+'</span></div><div id="tsecs" class="tcell t_secs"><span class="t_val secsVal">%S</span><span class="t_label">'+a.lbl_secs[s]+"</span></div>";"ar"==s&&(r='<div id="tsecs" class="tcell t_secs"><span class="t_val secsVal">%S</span><span class="t_label">'+a.lbl_secs[s]+'</span></div><div id="tmins" class="tcell t_mins"><span class="t_val minsVal">%M</span><span class="t_label">'+a.lbl_mins[s]+'</span></div><div id="thours" class="tcell t_hours"><span class="t_val hoursVal">%H</span><span class="t_label">'+a.lbl_hrs[s]+'</span></div><div id="tdays" class="tcell t_days"><span class="t_val daysVal">%D</span><span class="t_label">'+a.lbl_days[s]+"</span></div>");$(this).html(e.strftime(r)).on("finish.countdown",(function(e){$("#clock_wed").remove()}))})),$("#music_player_BTN").on("click",(function(){togglePause()}));var p=!1;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(p=!0),p&&$("#ios_audio_lockscreen").length>0&&($("#ios_audio_lockscreen").css("display","block"),$(".main_wrapper").addClass("iosAudio")),$("#ios_audio_lockscreen").on("click",(function(){document.getElementById("bgmusic").play(),$(this).fadeOut(300),setTimeout((function(){$(".main_wrapper").removeClass("iosAudio")}),400),evAutoPlay&&t.slick("slickPlay")})),SlideBg()})),$(window).on("load",(function(){$("#preloaderCont").fadeOut(),$("form .form-field #full_name, form .form-field #npersons, .form-field select#guests").val(""),$("form .form-field.fld-npersons").hide()})),$(window).on("resize",(function(){$(window).height()>768&&(appHeight(tplID),SlideBg())}));var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var s,a,r,n,t,i,l,o="",d=0;for(e=Base64._utf8_encode(e);d<e.length;)n=(s=e.charCodeAt(d++))>>2,t=(3&s)<<4|(a=e.charCodeAt(d++))>>4,i=(15&a)<<2|(r=e.charCodeAt(d++))>>6,l=63&r,isNaN(a)?i=l=64:isNaN(r)&&(l=64),o=o+this._keyStr.charAt(n)+this._keyStr.charAt(t)+this._keyStr.charAt(i)+this._keyStr.charAt(l);return o},decode:function(e){var s,a,r,n,t,i,l="",o=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");o<e.length;)s=this._keyStr.indexOf(e.charAt(o++))<<2|(n=this._keyStr.indexOf(e.charAt(o++)))>>4,a=(15&n)<<4|(t=this._keyStr.indexOf(e.charAt(o++)))>>2,r=(3&t)<<6|(i=this._keyStr.indexOf(e.charAt(o++))),l+=String.fromCharCode(s),64!=t&&(l+=String.fromCharCode(a)),64!=i&&(l+=String.fromCharCode(r));return l=Base64._utf8_decode(l)},_utf8_encode:function(e){var s="";e=e.replace(/\r\n/g,"\n");for(var a=0;a<e.length;a++){var r=e.charCodeAt(a);r<128?s+=String.fromCharCode(r):r>127&&r<2048?(s+=String.fromCharCode(r>>6|192),s+=String.fromCharCode(63&r|128)):(s+=String.fromCharCode(r>>12|224),s+=String.fromCharCode(r>>6&63|128),s+=String.fromCharCode(63&r|128))}return s},_utf8_decode:function(e){var s,a,r,n="",t=0;for(s=a=0;t<e.length;)(s=e.charCodeAt(t))<128?(n+=String.fromCharCode(s),t++):s>191&&s<224?(a=e.charCodeAt(t+1),n+=String.fromCharCode((31&s)<<6|63&a),t+=2):(a=e.charCodeAt(t+1),r=e.charCodeAt(t+2),n+=String.fromCharCode((15&s)<<12|(63&a)<<6|63&r),t+=3);return n}};